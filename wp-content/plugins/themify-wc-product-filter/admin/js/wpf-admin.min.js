function wpf_import(a){"use strict";var e=a.attr("id").replace("plupload-upload-ui",""),t=[],n=a.closest("form"),o=n.find(".wpf_error"),i=((t=n.data("plupload")).browse_button=e,t.container=a.closest("form").attr("id"),t.file_data_name=a.data("name")?a.data("name"):t.file_data_name,t.multipart_params={nonce:"",action:""},a.data("formats")&&(t.filters=a.data("formats")),new plupload.Uploader(t));i.init(),i.bind("FilesAdded",function(e,t){a.data("confirm")&&!confirm(a.data("confirm"))||(i.settings.multipart_params.action=n.find('input[name="action"]').val(),i.settings.multipart_params.nonce=n.find('input[name="nonce"]').val(),e.refresh(),e.start(),n.addClass("wpf_save"))}),i.bind("Error",function(e,t){n.removeClass("wpf_save"),t.message&&o.text(t.message)}),i.bind("FileUploaded",function(e,t,a){a?(a=JSON.parse(a.response)).error?(n.removeClass("wpf_save"),o.text(a.error)):a.success&&(setTimeout(function(){n.removeClass("wpf_save")},1500),window.location.reload()):n.removeClass("wpf_save")})}!function($){"use strict";window.addEventListener("load",function(){$("body").on("click","a.wpf_lightbox",function(t){t.preventDefault(),t.stopPropagation();var a=$(this);$.ajax({url:this,success:function(e){e&&n(t,a.attr("title"),e,a.data("class"),a.data("top"))}})}).on("click",".wpf_delete",function(e){var t,a;confirm(wpf_js.template_delete)&&(t=$(this),a=t.closest("table"),$.ajax({url:this,dataType:"json",beforeSend:function(){a.addClass("wpf_save")},complete:function(){a.removeClass("wpf_save")},success:function(e){e&&"1"==e.status&&t.closest("tr").remove()}})),e.preventDefault()}).on("click",".open_media_uploader_image",function(e){var t=$(this).closest(".wpf_background_image"),a=wp.media({frame:"post",state:"insert",multiple:!1});a.open(),a.on("insert",function(){var e=a.state().get("selection").first().toJSON();t.find("input").val(e.url),t.find("img").attr("src",e.url),t.addClass("has-image")}),e.preventDefault()}).on("click",".remove-background",function(e){var t=$(this).closest(".wpf_background_image");1==confirm("Remove background image?")&&(t.find("input").val(""),t.find("img").attr("src",""),t.removeClass("has-image")),e.preventDefault()})},{once:!0,passive:!0});var r=function(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))},l=function(e){27===e.keyCode&&(e.preventDefault(),c(e))},n=function(e,t,a,n,o){e.preventDefault(),$(document).on("keyup",l);var i="wpf_"+Math.random().toString(36).substr(2,9),t='<div id="'+i+'" class="wpf_admin_lightbox wpf_interface"><div class="wpf_lightbox_title">'+t+'</div><a href="#" class="wpf_close_lightbox">Ã—</a><div id="wpf_lightbox_container"><div class="wpf_lightbox_inner">'+a+'</div></div></div><div class="wpf_overlay"></div>';$("body").append(t),o=o||100,n&&$("#"+i).addClass(n),$.event.trigger("WPF.openlightbox",[e,i]),$("#"+i).nextAll(".wpf_overlay").show(),$("#"+i).show().css("top",r()).animate({top:o},800),$("#"+i).find(".wpf_close_lightbox").on("click",c);let s=$("#wpf-import-btn");s.length&&wpf_import(s)},c=function(e){e.preventDefault(),$(document).off("keyup",l);var t=$(this).closest(".wpf_admin_lightbox");$.event.trigger("WPF.close_lightbox",this),t.animate({top:r()},800,function(){t.next(".wpf_overlay").remove(),t.remove()})}}(jQuery);