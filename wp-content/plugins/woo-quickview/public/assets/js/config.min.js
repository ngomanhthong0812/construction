function wqv_get_key(array,key,value){for(var i=0;i<array.length;i++)if(array[i][key]===value)return i;return-1}jQuery(document).ready((function(jQuery){var wqv_products=[],wqv_ids=[];function wqv_ajax_add_to_cart(){jQuery(".single_add_to_cart_button").on("click",(function(e){e.preventDefault();var $thisbutton=jQuery(this),$form,data=getFormData($thisbutton.closest("form.cart"),jQuery(this));jQuery.ajax({url:wqv_vars.wc_ajax.toString().replace("%%endpoint%%","sp_ajax_add_cart"),enctype:"multipart/form-data",type:"post",data:data,processData:!1,contentType:!1,cache:!1,beforeSend:function(response){$thisbutton.removeClass("added").addClass("loading")},complete:function(response){$thisbutton.addClass("added").removeClass("loading")},success:function(response){response.error&response.product_url?window.location=response.product_url:jQuery(document.body).trigger("added_to_cart",[response.fragments,response.cart_hash,$thisbutton])}})}))}function getFormData(form,trigger){var formData=new FormData(form.get(0));if(form.find("button").each((function(){var key=jQuery(this).attr("name"),value=jQuery(this).val();key&&value&&!formData.has(key)&&formData.append(key,value)})),jQuery.each(trigger.data(),(function(key,value){formData.has(key)||formData.append(key,value)})),jQuery.each(trigger[0].dataset,(function(key,value){formData.has(key)||formData.append(key,value)})),!formData.has("add-to-cart")&&!formData.has("product_id")&&form.attr("action")){var is_url=form.attr("action").match(/add-to-cart=([0-9]+)/),productID=!!is_url&&is_url[1];productID&&formData.append("add-to-cart",productID)}return!formData.has("add-to-cart")&&formData.has("product_id")&&formData.append("add-to-cart",formData.get("product_id")),formData}jQuery(".sp-wqv-view-button").each((function(){var product_id=jQuery(this).attr("data-id");-1===jQuery.inArray(product_id,wqv_ids)&&(wqv_ids.push(product_id),wqv_products.push({src:wqv_vars.ajax_url+"?product_id="+product_id}))})),jQuery("body").on("click",".sp-wqv-view-button",(function(e){var product_id=jQuery(this).attr("data-id");-1===jQuery.inArray(product_id,wqv_ids)&&(wqv_ids.push(product_id),wqv_products.push({src:wqv_vars.ajax_url+"?product_id="+product_id}));var effect=jQuery(this).attr("data-effect"),data_wqv_json=jQuery(this).data("wqv");data_wqv=JSON.parse(data_wqv_json);var index=wqv_get_key(wqv_products,"src",wqv_vars.ajax_url+"?product_id="+product_id);function get_selected_product_variation_image(data_wqv){var variation_images={};jQuery("form.variations_form").each((function(){var product_variations=JSON.parse(jQuery(this).attr("data-product_variations"));jQuery.each(product_variations,(function(i,variation){variation.image.url&&(variation_images[variation.variation_id]=[variation.image.url,variation.image.title])}))})),jQuery("input.variation_id").on("change",(function(){var variation_id=jQuery("input.variation_id").val();if(variation_images[variation_id]){var image_url=variation_images[variation_id][0],image_title=variation_images[variation_id][1];if(data_wqv.lightbox)var lightbox_start='<a data-fancybox="wqvpro-gallery" title="'+image_title+'" href="'+image_url+'">',lightbox_end="</a>";else lightbox_start="",lightbox_end="";var image_html='<span data-thumb="'+image_url+'" class="selected" itemprop="image" title="'+image_title+'">'+lightbox_start+'<img src="'+image_url+'" />'+lightbox_end+"</span>";jQuery(".wqv-product-images").html(image_html)}}))}jQuery.magnificPopup.open({items:wqv_products,type:"ajax",mainClass:"mfp-wqv",preloader:data_wqv.preloader,tLoading:data_wqv.preloader_label,autoFocusLast:!1,fixedContentPos:!0,fixedBgPos:!0,ajax:{settings:{type:"GET",data:{action:"wqv_popup_content",_ajax_nonce:wqv_vars.nonce}}},showCloseBtn:data_wqv.close_button,closeMarkup:'<button title="%title%" type="button" class="mfp-close icon-4"></button>',removalDelay:160,callbacks:{beforeOpen:function(){this.st.mainClass=void 0!==effect&&!1!==effect?"mfp-wqv "+effect:"mfp-wqv "+wqv_vars.effect},ajaxContentAdded:function(){var form_variation;"undefined"!=typeof wc_add_to_cart_variation_params&&(get_selected_product_variation_image(data_wqv),jQuery(".sp-wqv-content").find(".variations_form").each((function(){jQuery(this).wc_variation_form()})));data_wqv.lightbox&&jQuery('[data-fancybox="wqvpro-gallery"]').fancybox({baseClass:" wqvp-fancybox-wrapper",infobar:!1,caption:function(){var caption="";return 1==data_wqv.image_title&&(caption=jQuery(this).attr("title")||""),caption},buttons:["zoom","close"]}),data_wqv.ajax_cart&&wqv_ajax_add_to_cart();const ps=new PerfectScrollbar(".wqv-product-content",{})}}},index),e.preventDefault()})),jQuery(document).on("click",".sp-wqv-content .reset_variations",(function(e){var current_product=jQuery(this).parents("#wqv-quick-view-content").data("id");jQuery('.sp-wqv-view-button[data-id="'+current_product+'"]').trigger("click")}))}));